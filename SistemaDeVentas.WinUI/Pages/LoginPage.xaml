<Page
    x:Class="SistemaDeVentas.WinUI.Pages.LoginPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SistemaDeVentas.WinUI.Pages"
    Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}">

    <Grid>
        <!-- Background with Acrylic effect -->
        <Border Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                Opacity="0.8"/>

        <!-- Main Content -->
        <Grid Padding="24">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" MaxWidth="400">
                <!-- Logo/Icon -->
                <Border Background="{StaticResource PrimaryBrush}"
                        CornerRadius="50"
                        Width="100" Height="100"
                        Margin="0,0,0,24"
                        HorizontalAlignment="Center">
                    <FontIcon Glyph="&#xE77B;" FontSize="48" Foreground="White"/>
                </Border>

                <!-- Login Card -->
                <Border Style="{StaticResource ElevatedCardStyle}"
                        Padding="32"
                        Margin="0,0,0,24"
                        x:Name="LoginCard">
                    <Border.RenderTransform>
                        <TranslateTransform />
                    </Border.RenderTransform>
                    <StackPanel Spacing="16">
                        <!-- Title -->
                        <TextBlock Text="Bienvenido"
                                   Style="{StaticResource TitleTextBlockStyle}"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,8"/>
                        <TextBlock Text="Inicie sesión en su cuenta"
                                   Style="{StaticResource CaptionTextBlockStyle}"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,24"/>

                        <!-- Username Field -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Usuario" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                            <TextBox x:Name="UsernameTextBox"
                                     PlaceholderText="Ingrese su usuario"
                                     Style="{StaticResource FluentTextBoxStyle}"
                                     AutomationProperties.Name="Usuario"/>
                        </StackPanel>

                        <!-- Password Field -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Contraseña" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                            <PasswordBox x:Name="PasswordBox"
                                         PlaceholderText="Ingrese su contraseña"
                                         Style="{StaticResource FluentPasswordBoxStyle}"
                                         AutomationProperties.Name="Contraseña"/>
                        </StackPanel>

                        <!-- Sign In Button -->
                        <Button x:Name="SignInButton"
                                Style="{StaticResource PrimaryButtonStyle}"
                                HorizontalAlignment="Stretch"
                                Margin="0,16,0,0"
                                Click="SignInButton_Click">
                            <Button.Content>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon Glyph="&#xE8D7;" FontSize="16"/>
                                    <TextBlock Text="Iniciar Sesión"/>
                                </StackPanel>
                            </Button.Content>
                        </Button>

                        <!-- Error Message -->
                        <Border x:Name="ErrorBorder"
                                Background="{ThemeResource SystemFillColorCriticalBackgroundBrush}"
                                BorderBrush="{ThemeResource SystemFillColorCriticalBrush}"
                                BorderThickness="1"
                                CornerRadius="{StaticResource SmallCornerRadius}"
                                Padding="{StaticResource SmallPadding}"
                                Visibility="Collapsed"
                                Margin="0,16,0,0">
                            <TextBlock x:Name="ErrorTextBlock"
                                       Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                                       TextWrapping="Wrap"
                                       HorizontalAlignment="Center"/>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- Footer -->
                <TextBlock Text="Sistema de Ventas v1.0"
                           Style="{StaticResource CaptionTextBlockStyle}"
                           Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <!-- Loading Overlay -->
        <Border x:Name="LoadingOverlay"
                Background="{ThemeResource SmokeFillColorDefaultBrush}"
                Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="16">
                <ProgressRing x:Name="LoadingProgressRing"
                              IsActive="True"
                              Width="48" Height="48"
                              Style="{StaticResource FluentProgressRingStyle}"/>
                <TextBlock Text="Iniciando sesión..."
                           Style="{StaticResource BodyTextBlockStyle}"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>

    <!-- Page Animations -->
    <Page.Resources>
        <Storyboard x:Key="PageLoadStoryboard">
            <DoubleAnimation Storyboard.TargetName="LoginCard"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.5"/>
            <DoubleAnimation Storyboard.TargetName="LoginCard"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="30" To="0" Duration="0:0:0.5">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Page.Resources>
</Page>